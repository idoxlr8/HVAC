Email version 0.1 alpha 
(c) 2007-2008 Web Lite Solutions Corp, AllRights Reserved 
@author Steve Hannah <steve@weblite.ca>

This program is free software; you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the
Free Software Foundation; either version 2 of the License, or (at your
option) any later version.

This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
General Public License for more details.

You should have received a copy of the GNU General Public License along
with this program; if not, write to the Free Software Foundation, Inc.,
51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.


About this module:
------------------

This is a module for the Xataface Application Framework that adds the
ability for properly privileged users to send email to all records in
the current found set.  It uses heuristics to try to find out which
column contains the email address for each record.

This is particularly useful for tables that store people information. 
It transforms a Xataface application into an instant maillist manager.

Development Status:
-------------------

	Under development

Requirements:
-------------

	Xataface 1.0 or higher

Installation:
-------------

	1. Download the Email directory into your Xataface modules directory.

	2. Add the following to the [_modules] section of your application's
	conf.ini file:

		modules_Email="modules/Email/Email.php"

	3. Configure the [email] action in your application's actions.ini
	file.  See the section called 'Configuration' for configuration
	details.
	
	4. Add a line to your crontab file to send out pending email periodically.
	The line should look like:
	
	* * * * * /usr/bin/php <cronpath> <indexpath> <indexurl> mail
	
	where
		<cronpath> is the absolute path to the cron.php script.
		<indexpath> is the absolute path to your application's index.php script.
		<indexurl> is the absolute url to your application's index.php script.
		
	For example:
	
	* * * * * /usr/bin/php /var/www/xataface/modules/Email/cron.php \
		/var/www/myapp/index.php \
		http://example.com/myapp/index.php \
		mail
		
	If you want to see what this line should be like for your server, you can
	simply point your browser to the email_install action of your application
	(i.e. http://example.com/yourapp/index.php?-action=email_install) and it will
	generate this line to copy and paste into your crontab.
	
	Note that the /usr/bin/php portion of this line may vary according to your
	environment.  It represents the path to your PHP binary.

	5. That's it.  Now, you will see a little email icon in the upper
	right corner of your application's list view.  Clicking on this icon
	will allow you to send email to all records in the current found set.
	   
	   
Configuration:
--------------

	Though the email action may work out of the box, you will likely have to
configure it to work the way you want.  Some examples of things you will
want to configure include:

		1. Limit the email action to only be available for certain
		tables.

		2. Apply permissions to the action so that only administrators
		can send email.

		3. Set the name of the column that contains email address
		(default is 'email').

		4. Change the name of the table that is used to store sent email
		messages.

	Overriding the [email] action:

		The first thing you need to do to configure the email action is
		override it in your appliation's actions.ini file.  You can do
		this by adding the following to your actions.ini file:

			[email > email]

		Now any directives you add in this section will override the
		email action.

	Examples:

		Limiting email action to certain tables:
		
			[email > email]
      			condition="$query['-table'] == 'Pledge' or $query['-table'] == 'User'"
     
     	Limiting email action by permission:
     	
     		[email > email]
     			permission=email
     			
     		Note that this assumes that you have added a permission named 'email' to
			your permissions.ini file.

     	Changing the name of the email address column:
     	
     		[email > email]
				email_column = "emailAddress"

		Changing the name of the table that stores the sent email (this table will be 
		automatically generated by the module:
		
			[email > email]
				email_table = "newsletters"
			
		
		Altogether:
		
			[email > email]
				condition="$query['-table'] == 'Pledge' or $query['-table'] == 'User'"
				permission=email
				email_column = "emailAddress"
				email_table = "newsletters"


Usage:
------

Access your application, and click on the "list" tab for any table for which the email
action is enabled.  You should see a little "email" icon in the upper right.  Click
on this icon to see a mail form.  Complete this form and submit it to send email to 
every user in the found set.


Support:
--------

See the Xataface forum:  http://xataface.com/forum
				
			
	
		
